<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin menu</title>
    <link rel="stylesheet" type="text/css" href="../Styles/MainMenu.css">
</head>
<body>
<h1>Admin Menu</h1>
<table>
    <tr>
        <th>Username</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Role</th>
        <th>Possible actions</th>
    </tr>
    <tbody id="userDataList"></tbody>

</table>

<script>

    // Displays a table of users and potential actions
    async function checkUsers()
    {
        const users = await fetch('/allUsers', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const data = await users.json();

        const userList = document.getElementById('userDataList');
        userList.innerHTML = '';

        data.forEach(item =>
        {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${item.USER_USERNAME}</td>
                <td>${item.USER_PASSWORD}</td>
                <td>${item.USER_EMAIL}</td>
                <td>${item.USER_PERMISSION}</td>
                <td><button type="button" onclick="deleteUser('${item.username}')">Delete</button></td>
                <td><button type="button" onclick="grantPermissions('${item.username}')">Grant Permissions</button></td>
            `;
            userList.appendChild(row);
        });

    }

    function checkGames()
    {
        // TODO implement check games function
    }

    function checkScores()
    {
        // TODO implement check scores function
    }

    function checkQuestions()
    {
        // TODO implement check questions function
    }

    function checkAnswers()
    {
        // TODO implement check answers function
    }

    function grantPermissions()
    {
        // TODO implement grant permissions function
    }

    function deleteUser()
    {
        // TODO implement delete user function
    }

    window.onload = checkUsers;
</script>

</body>
</html>